{"version":3,"file":"src_app_agregar-falla_agregar-falla_module_ts.js","mappings":"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","sources":["./src/app/agregar-falla/agregar-falla-routing.module.ts","./src/app/agregar-falla/agregar-falla.module.ts","./src/app/agregar-falla/agregar-falla.page.ts","./src/app/services/alert.service.ts","./src/app/agregar-falla/agregar-falla.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { AgregarFallaPage } from './agregar-falla.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AgregarFallaPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class AgregarFallaPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { AgregarFallaPageRoutingModule } from './agregar-falla-routing.module';\r\n\r\nimport { AgregarFallaPage } from './agregar-falla.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    AgregarFallaPageRoutingModule\r\n  ],\r\n  declarations: [AgregarFallaPage]\r\n})\r\nexport class AgregarFallaPageModule {}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { BPMService } from '../services/bpm.service';\r\nimport { AlertService } from '../services/alert.service';\r\nimport { LoadingController, ModalController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-agregar-falla',\r\n  templateUrl: './agregar-falla.page.html',\r\n  styleUrls: ['./agregar-falla.page.scss'],\r\n})\r\nexport class AgregarFallaPage implements OnInit {\r\n\r\n  @Input() ticket;\r\n  viewEntered = false;\r\n  descripcion = '';\r\n  falla = '';\r\n  hasta = this.getDate();\r\n  maxDate: any;\r\n  activos;\r\n  activo;\r\n  hora;\r\n  situacion = 1;\r\n  ticketNuevo: any;\r\n\r\n  constructor( private bpmService: BPMService, private alertService: AlertService, private loadingController: LoadingController,\r\n    private modalController: ModalController ) { }\r\n\r\n  async ngOnInit() {\r\n    (await this.bpmService.getStatus()).subscribe((resp: any) =>{\r\n      console.log(resp);\r\n      if(resp.status){\r\n        this.activos = resp.data;\r\n      }else{\r\n        this.alertService.presentAlert('Ha ocurrido un error en el servidor, intente de nuevo más tarde');\r\n      }\r\n    });\r\n  }\r\n\r\n  async ionViewDidEnter() {\r\n    this.viewEntered = true;\r\n    await this.loadingController.dismiss();\r\n  }\r\n\r\n  ionViewWillLeave(){\r\n    this.viewEntered = false;\r\n  }\r\n\r\n  async back(){\r\n    this.modalController.dismiss();\r\n  }\r\n\r\n  selectCategoria(ev){\r\n    this.activo = ev.detail.value;\r\n  }\r\n\r\n  async cambioFechaHasta( event ){\r\n    this.hasta = await event.detail.value.split('T');\r\n    this.hora = await this.hasta[1];\r\n    this.hasta = await this.hasta[0].replace('-','/');\r\n    this.hora = await this.hora.split('-');\r\n    this.hora = await this.hora[0];\r\n  }\r\n\r\n  getDate(){\r\n    const today = new Date();\r\n    const dd = String(today.getDate()).padStart(2, '0');\r\n    const mm = String(today.getMonth()).padStart(2, '0');\r\n    const yyyy = today.getFullYear();\r\n\r\n    this.maxDate = new Date(yyyy, parseInt(mm, 10), parseInt(dd, 10));\r\n    const hoy = this.maxDate;\r\n    return hoy;\r\n  }\r\n\r\n  async agregarFalla(){\r\n    (await this.bpmService.agregarFalla(this.ticket.codigo, this.activo, this.falla, this.situacion, this.hasta, this.hora,\r\n      this.descripcion))\r\n      .subscribe(async (resp: any)=>{\r\n        console.log(resp);\r\n        if(resp.status){\r\n          await (await this.bpmService.getTicket(this.ticket.codigo)).subscribe(async (res: any)=>{\r\n            this.ticketNuevo = await res.data;\r\n            this.alertService.presentToast('Falla agregada correctamente', 'success', 2500);\r\n            this.presentLoading();\r\n            await this.modalController.dismiss(this.ticketNuevo);\r\n          });\r\n        }else{\r\n          this.alertService.presentAlert(resp.message);\r\n        }\r\n      });\r\n  }\r\n\r\n  async presentLoading() {\r\n    const loading = await this.loadingController.create({\r\n      message: 'Cargando...'\r\n    });\r\n    await loading.present();\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AlertController, ToastController } from '@ionic/angular';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AlertService {\r\n\r\n  constructor(public alertCtrl: AlertController, public toastController: ToastController) { }\r\n\r\n  async presentAlert(message) {\r\n    const alert = await this.alertCtrl.create({\r\n      message,\r\n      mode: 'md',\r\n      buttons: ['OK']\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  async presentToast(message, color, duration) {\r\n    const toast = await this.toastController.create({\r\n      message,\r\n      duration,\r\n      color\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n}\r\n","export default \"<ion-header *ngIf=\\\"viewEntered\\\" class=\\\"animate__animated animate__fadeInDown\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"back()\\\" color=\\\"light\\\">Atrás\\r\\n        <ion-icon slot=\\\"start\\\" name=\\\"arrow-back-outline\\\" color=\\\"light\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Agregar falla</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content *ngIf=\\\"viewEntered\\\" class=\\\"animate__animated animate__fadeInUp\\\">\\r\\n<br>\\r\\n  <ion-list>\\r\\n    <ion-item>\\r\\n      <ion-label>Activo</ion-label>\\r\\n      <ion-select (ionChange)=\\\"selectCategoria($event)\\\">\\r\\n        <ion-select-option *ngFor=\\\"let activo of activos\\\" value=\\\"{{activo.codigo}}\\\">{{activo.nombre}}</ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label>Falla :</ion-label>\\r\\n      <ion-textarea rows=\\\"4\\\" placeholder=\\\"Falla...\\\" [(ngModel)]=\\\"falla\\\">  </ion-textarea>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label>Comentario :</ion-label>\\r\\n      <ion-textarea rows=\\\"4\\\" placeholder=\\\"Comentario...\\\" [(ngModel)]=\\\"descripcion\\\">  </ion-textarea>\\r\\n    </ion-item>\\r\\n    <br>\\r\\n    <ion-datetime [value]=\\\"maxDate.toISOString()\\\" min=\\\"2020-01-01\\\" (ionChange)=\\\"cambioFechaHasta($event)\\\" style=\\\"margin-left: 20px;\\r\\n    border-radius: 20px;\\\"></ion-datetime>\\r\\n  </ion-list>\\r\\n<br>\\r\\n  <ion-row>\\r\\n    <ion-col size=\\\"3\\\"></ion-col>\\r\\n    <ion-col size=\\\"6\\\">\\r\\n      <ion-button expand=\\\"block\\\" class=\\\"button-save\\\" strong=\\\"true\\\" (click)=\\\"agregarFalla()\\\">Guardar\\r\\n                <ion-icon slot=\\\"start\\\" color=\\\"white\\\" name=\\\"save\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-col>\\r\\n    <ion-col size=\\\"3\\\"></ion-col>\\r\\n  </ion-row>\\r\\n\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}