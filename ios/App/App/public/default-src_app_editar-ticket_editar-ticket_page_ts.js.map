{"version":3,"file":"default-src_app_editar-ticket_editar-ticket_page_ts.js","mappings":"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","sources":["./node_modules/@capacitor/camera/dist/esm/definitions.js","./node_modules/@capacitor/camera/dist/esm/index.js","./src/app/editar-ticket/editar-ticket.page.ts","./src/app/editar-ticket/editar-ticket.page.html"],"sourcesContent":["export var CameraSource;\n(function (CameraSource) {\n    /**\n     * Prompts the user to select either the photo album or take a photo.\n     */\n    CameraSource[\"Prompt\"] = \"PROMPT\";\n    /**\n     * Take a new photo using the camera.\n     */\n    CameraSource[\"Camera\"] = \"CAMERA\";\n    /**\n     * Pick an existing photo fron the gallery or photo album.\n     */\n    CameraSource[\"Photos\"] = \"PHOTOS\";\n})(CameraSource || (CameraSource = {}));\nexport var CameraDirection;\n(function (CameraDirection) {\n    CameraDirection[\"Rear\"] = \"REAR\";\n    CameraDirection[\"Front\"] = \"FRONT\";\n})(CameraDirection || (CameraDirection = {}));\nexport var CameraResultType;\n(function (CameraResultType) {\n    CameraResultType[\"Uri\"] = \"uri\";\n    CameraResultType[\"Base64\"] = \"base64\";\n    CameraResultType[\"DataUrl\"] = \"dataUrl\";\n})(CameraResultType || (CameraResultType = {}));\n","import { registerPlugin } from '@capacitor/core';\nconst Camera = registerPlugin('Camera', {\n    web: () => import('./web').then(m => new m.CameraWeb()),\n});\nexport * from './definitions';\nexport { Camera };\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { LoadingController, ModalController } from '@ionic/angular';\r\nimport { BPMService } from '../services/bpm.service';\r\nimport { AlertService } from '../services/alert.service';\r\nimport { Storage } from '@ionic/storage-angular';\r\nimport { Camera, CameraResultType } from '@capacitor/camera';\r\n\r\n@Component({\r\n  selector: 'app-editar-ticket',\r\n  templateUrl: './editar-ticket.page.html',\r\n  styleUrls: ['./editar-ticket.page.scss'],\r\n})\r\nexport class EditarTicketPage implements OnInit {\r\n\r\n  @Input() ticket;\r\n  viewEntered = false;\r\n\r\n  sedes;\r\n  sectores;\r\n  areas;\r\n  categorias;\r\n  prioridades;\r\n  incidentes;\r\n  //\r\n  sede = '';\r\n  sector = '';\r\n  area =  '';\r\n  categoria = '';\r\n  prioridad = '';\r\n  incidente = '';\r\n  descripcion = '';\r\n  ticketNuevo: any;\r\n  selectedFile;\r\n  status;\r\n  estado;\r\n  estadoActual = '';\r\n  prioridadActual = '';\r\n  sectorActual = '';\r\n  sedeActual = '';\r\n  incidenteActual = '';\r\n  areaActual = '';\r\n  categoriaActual = '';\r\n  datosUsuario;\r\n  fileName;\r\n  mostrarFoto = false;\r\n  photo;\r\n\r\n  constructor(private loadingController: LoadingController, private modalController: ModalController, private bpmService: BPMService,\r\n              private alertService: AlertService, private storage: Storage) { }\r\n\r\n  async ngOnInit() {\r\n    (await this.bpmService.getSedes()).subscribe(async (resp: any) =>{\r\n      console.log(resp);\r\n      if(resp.status){\r\n        this.sedes = await resp.data;\r\n        this.sedeActual = await this.ticket.sede_codigo;\r\n      }else{\r\n        this.alertService.presentAlert('Ha ocurrido un error en el servidor, intente de nuevo más tarde');\r\n      }\r\n    });\r\n    (await this.bpmService.getCategorias()).subscribe(async (resp: any) =>{\r\n      console.log(resp);\r\n      if(resp.status){\r\n        this.categorias = await resp.data;\r\n        this.categoriaActual = await this.ticket.categoria_codigo;\r\n      }else{\r\n        this.alertService.presentAlert('Ha ocurrido un error en el servidor, intente de nuevo más tarde');\r\n      }\r\n    });\r\n    (await this.bpmService.getIncidentes(this.categoria)).subscribe(async (resp: any) =>{\r\n      console.log(resp);\r\n      if(resp.status){\r\n        this.incidentes = await resp.data;\r\n        this.incidenteActual = await this.ticket.incidente_codigo;\r\n      }else{\r\n        this.alertService.presentAlert('Ha ocurrido un error en el servidor, intente de nuevo más tarde');\r\n      }\r\n    });\r\n    (await this.bpmService.getPrioridades()).subscribe(async (resp: any) =>{\r\n      console.log(resp);\r\n      if(resp.status){\r\n        this.prioridades = await resp.data;\r\n        this.prioridadActual = await this.ticket.prioridad_codigo;\r\n      }else{\r\n        this.alertService.presentAlert('Ha ocurrido un error en el servidor, intente de nuevo más tarde');\r\n      }\r\n    });\r\n    (await this.bpmService.getSectores()).subscribe(async (resp: any) =>{\r\n      console.log(resp);\r\n      if(resp.status){\r\n        this.sectores = await resp.data;\r\n        this.sectorActual = await this.ticket.sector_codigo;\r\n      }else{\r\n        this.alertService.presentAlert('Ha ocurrido un error en el servidor, intente de nuevo más tarde');\r\n      }\r\n    });\r\n    (await this.bpmService.getAreas(this.sedeActual, this.area)).subscribe(async (resp: any) =>{\r\n      console.log(resp);\r\n      if(resp.status){\r\n        this.areas = await resp.data;\r\n        this.areaActual = await this.ticket.area_codigo;\r\n      }else{\r\n        this.alertService.presentAlert('Ha ocurrido un error en el servidor, intente de nuevo más tarde');\r\n      }\r\n    });\r\n    (await this.bpmService.getStatus(this.ticket.codigo)).subscribe(async (resp: any) =>{\r\n      console.log(resp);\r\n      if(resp.status){\r\n        this.status = await resp.data;\r\n        this.estadoActual = await this.ticket.estatus_codigo;\r\n      }else{\r\n        this.alertService.presentAlert('Ha ocurrido un error en el servidor, intente de nuevo más tarde');\r\n      }\r\n    });\r\n  }\r\n\r\n  async ionViewDidEnter() {\r\n    setTimeout(async () => {\r\n      this.viewEntered = await true;\r\n      await this.loadingController.dismiss();\r\n    }, 800);\r\n  }\r\n\r\n  ionViewWillLeave(){\r\n    this.viewEntered = false;\r\n  }\r\n\r\n  async back(){\r\n    this.modalController.dismiss();\r\n  }\r\n\r\n  selectCategoria(ev){\r\n    this.categoriaActual = ev.detail.value;\r\n  }\r\n\r\n  selectArea(ev){\r\n    console.log(ev);\r\n    this.areaActual = ev.detail.value;\r\n  }\r\n\r\n  selectIncidente(ev){\r\n    this.incidenteActual = ev.detail.value;\r\n  }\r\n\r\n  selectSede(ev){\r\n    this.sedeActual = ev.detail.value;\r\n  }\r\n\r\n  selectSector(ev){\r\n    this.sectorActual = ev.detail.value;\r\n  }\r\n\r\n  selectPrioridad(ev){\r\n    this.prioridadActual = ev.detail.value;\r\n  }\r\n\r\n  selectEstado(ev){\r\n    this.estadoActual = ev.detail.value;\r\n  }\r\n\r\n  async editar(){\r\n    if(this.sedeActual === '' || this.sectorActual === '' || this.areaActual === '' || this.categoriaActual === ''\r\n      || this.prioridadActual === '' || this.incidenteActual === '' || this.descripcion === ''){\r\n        this.loadingController.dismiss();\r\n        this.alertService.presentAlert('Debe de llenar todos los campos antes de actualizar el ticket.');\r\n    }else{\r\n      this.presentLoading();\r\n      (await this.bpmService.editar(this.ticket.codigo, this.descripcion, this.incidenteActual, this.prioridadActual, this.sedeActual,\r\n                                    this.sectorActual, this.areaActual))\r\n        .subscribe(async (resp: any) => {\r\n          console.log(resp);\r\n          if(resp.status){\r\n            await (await this.bpmService.getTicket(this.ticket.codigo)).subscribe(async (res: any)=>{\r\n              if(res.status){\r\n                console.log(resp);\r\n                this.ticketNuevo = await res.data;\r\n                await this.alertService.presentToast('El ticket se ha actualizado correctamente', 'success', 2500);\r\n                this.post();\r\n                await this.modalController.dismiss(this.ticketNuevo);\r\n              }else{\r\n                this.alertService.presentAlert(res.message);\r\n              }\r\n            });\r\n          }else{\r\n            this.alertService.presentAlert(resp.message);\r\n          }\r\n        });\r\n        this.modalController.dismiss();\r\n    }\r\n\r\n  }\r\n\r\n  async takePicture(){\r\n\r\n    const image = await Camera.getPhoto({\r\n      quality: 70,\r\n      allowEditing: false,\r\n      resultType: CameraResultType.Base64\r\n    });\r\n\r\n    const imageUrl = await 'data:image/jpeg;base64,' + image.base64String;\r\n    this.photo = await imageUrl;\r\n    this.selectedFile = await this.dataURLtoFile(imageUrl, 'image');\r\n    this.datosUsuario = await this.storage.get('datos');\r\n    this.mostrarFoto = await true;\r\n  }\r\n\r\n  dataURLtoFile(dataurl, filename) {\r\n    // eslint-disable-next-line one-var\r\n    let arr = dataurl.split(','),\r\n      mime = arr[0].match(/:(.*?);/)[1],\r\n      bstr = atob(arr[1]),\r\n      n = bstr.length,\r\n      u8arr = new Uint8Array(n);\r\n    while (n--){\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    return new File([u8arr], filename, {type: mime});\r\n}\r\n\r\n  async presentLoading() {\r\n    const loading = await this.loadingController.create({\r\n      message: 'Cargando...'\r\n    });\r\n    await loading.present();\r\n  }\r\n\r\n  async onFileSelected(event) {\r\n    this.datosUsuario = await this.storage.get('datos');\r\n    this.selectedFile = event.target.files[0];\r\n    this.fileName = this.selectedFile.name;\r\n}\r\n\r\n  async post(){\r\n    (await this.bpmService.post(this.ticket.codigo, this.area, this.selectedFile, this.descripcion)).subscribe((resp: any) =>{\r\n      console.log(resp);\r\n    });\r\n  }\r\n\r\n\r\n}\r\n","export default \"<ion-header *ngIf=\\\"viewEntered\\\" class=\\\"animate__animated animate__fadeInDown\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"back()\\\" color=\\\"light\\\">Atrás\\r\\n        <ion-icon slot=\\\"start\\\" name=\\\"arrow-back-outline\\\" color=\\\"light\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Actualización de ticket</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content *ngIf=\\\"viewEntered\\\" class=\\\"animate__animated animate__fadeInUp\\\">\\r\\n\\r\\n  <br>\\r\\n  <ion-list>\\r\\n    <ion-item>\\r\\n      <ion-label>Categoría</ion-label>\\r\\n      <ion-select (ionChange)=\\\"selectCategoria($event)\\\" [value]=\\\"categoriaActual\\\">\\r\\n        <ion-select-option *ngFor=\\\"let categoria of categorias\\\" value=\\\"{{categoria.codigo}}\\\">{{categoria.nombre}}</ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label>Prioridad</ion-label>\\r\\n      <ion-select (ionChange)=\\\"selectPrioridad($event)\\\" [value]=\\\"prioridadActual\\\">\\r\\n        <ion-select-option *ngFor=\\\"let prioridad of prioridades\\\" value=\\\"{{prioridad.codigo}}\\\">{{prioridad.nombre}}</ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label>Incidente</ion-label>\\r\\n      <ion-select (ionChange)=\\\"selectIncidente($event)\\\" [value]=\\\"incidenteActual\\\">\\r\\n        <ion-select-option *ngFor=\\\"let incidente of incidentes\\\" value=\\\"{{incidente.codigo}}\\\">{{incidente.nombre}}</ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label>Área</ion-label>\\r\\n      <ion-select (ionChange)=\\\"selectArea($event)\\\" [value]=\\\"areaActual\\\">\\r\\n        <ion-select-option *ngFor=\\\"let area of areas\\\" value=\\\"{{area.codigo}}\\\">{{area.nombre}}</ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label>Sede</ion-label>\\r\\n      <ion-select (ionChange)=\\\"selectSede($event)\\\" [value]=\\\"sedeActual\\\">\\r\\n        <ion-select-option *ngFor=\\\"let sede of sedes\\\" value=\\\"{{sede.codigo}}\\\">{{sede.nombre}}</ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label>Sector</ion-label>\\r\\n      <ion-select (ionChange)=\\\"selectSector($event)\\\" [value]=\\\"sectorActual\\\">\\r\\n        <ion-select-option *ngFor=\\\"let sector of sectores\\\" value=\\\"{{sector.codigo}}\\\">{{sector.nombre}}</ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label>Status</ion-label>\\r\\n      <ion-select (ionChange)=\\\"selectEstado($event)\\\" [value]=\\\"estadoActual\\\">\\r\\n        <ion-select-option *ngFor=\\\"let estado of status\\\" value=\\\"{{estado.codigo}}\\\">{{estado.nombre}}</ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label>Descripción :</ion-label>\\r\\n      <ion-textarea rows=\\\"4\\\" placeholder=\\\"Descripción...\\\" [(ngModel)]=\\\"descripcion\\\">  </ion-textarea>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n<br>\\r\\n\\r\\n<div *ngIf=\\\"mostrarFoto\\\">\\r\\n  <img [src]=\\\"photo\\\" class=\\\"imageDefault\\\">\\r\\n</div>\\r\\n\\r\\n<ion-row>\\r\\n<ion-col size=\\\"3.5\\\"></ion-col>\\r\\n<ion-col size=\\\"4\\\">\\r\\n<ion-button  style=\\\"--background: #c54f4d;\\\" class=\\\"upload-btn\\\"\\r\\n        (click)=\\\"takePicture()\\\">\\r\\n        Subir imágen\\r\\n         <ion-icon slot=\\\"start\\\" name=\\\"cloud-upload\\\" ></ion-icon>\\r\\n</ion-button>\\r\\n</ion-col>\\r\\n<ion-col size=\\\"4\\\"></ion-col>\\r\\n</ion-row>\\r\\n\\r\\n<input type=\\\"file\\\" class=\\\"file-input\\\"\\r\\n(change)=\\\"onFileSelected($event)\\\" #fileUpload>\\r\\n\\r\\n<div class=\\\"file-upload\\\">\\r\\n  <ion-row>\\r\\n      <ion-col size=\\\"3.5\\\"></ion-col>\\r\\n      <ion-col size=\\\"4\\\">\\r\\n        <ion-button mat-mini-fab style=\\\"--background: #c54f4d;\\\" class=\\\"upload-btn\\\"\\r\\n        (click)=\\\"fileUpload.click()\\\">\\r\\n        Subir archivo\\r\\n        <ion-icon slot=\\\"start\\\" name=\\\"cloud-upload\\\" ></ion-icon>\\r\\n        </ion-button>\\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"4\\\"></ion-col>\\r\\n  </ion-row>\\r\\n<ion-text style=\\\"text-align: center;\\\">\\r\\n  <h6>{{fileName || \\\"Aún no se ha subido ningún archivo.\\\"}}</h6>\\r\\n</ion-text>\\r\\n</div>\\r\\n\\r\\n  <br>\\r\\n  <ion-row>\\r\\n    <ion-col size=\\\"3\\\"></ion-col>\\r\\n    <ion-col size=\\\"6\\\">\\r\\n      <ion-button expand=\\\"block\\\" class=\\\"button-save\\\" strong=\\\"true\\\" (click)=\\\"editar()\\\">Grabar\\r\\n                <ion-icon slot=\\\"start\\\" color=\\\"white\\\" name=\\\"save\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-col>\\r\\n    <ion-col size=\\\"3\\\"></ion-col>\\r\\n  </ion-row>\\r\\n\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}