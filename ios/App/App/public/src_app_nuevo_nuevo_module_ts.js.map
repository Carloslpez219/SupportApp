{"version":3,"file":"src_app_nuevo_nuevo_module_ts.js","mappings":"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","sources":["./src/app/nuevo/nuevo-routing.module.ts","./src/app/nuevo/nuevo.module.ts","./src/app/nuevo/nuevo.page.ts","./src/app/nuevo/nuevo.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NuevoPage } from './nuevo.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NuevoPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NuevoPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NuevoPageRoutingModule } from './nuevo-routing.module';\n\nimport { NuevoPage } from './nuevo.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NuevoPageRoutingModule\n  ],\n  declarations: [NuevoPage]\n})\nexport class NuevoPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { NavController, LoadingController } from '@ionic/angular';\nimport { BPMService } from '../services/bpm.service';\nimport { AlertService } from '../services/alert.service';\n\n@Component({\n  selector: 'app-nuevo',\n  templateUrl: './nuevo.page.html',\n  styleUrls: ['./nuevo.page.scss'],\n})\nexport class NuevoPage implements OnInit {\n\n  sedes;\n  sectores;\n  areas;\n  categorias;\n  prioridades;\n  incidentes;\n  //\n  sede;\n  sector;\n  area;\n  categoria;\n  prioridad;\n  incidente;\n  descripcion = '';\n  selectedFile;\n  ticketCodigo;\n\n  constructor(private navCtrl: NavController, private bpmService: BPMService, private alertService: AlertService,\n              private loadingController: LoadingController) { }\n\n  async ngOnInit() {\n    (await this.bpmService.getSedes()).subscribe((resp: any) =>{\n      if(resp.status){\n        this.sedes = resp.data;\n      }else{\n        this.alertService.presentAlert('Ha ocurrido un error en el servidor, intente de nuevo más tarde');\n      }\n    });\n    (await this.bpmService.getCategorias()).subscribe((resp: any) =>{\n      if(resp.status){\n        this.categorias = resp.data;\n      }else{\n        this.alertService.presentAlert('Ha ocurrido un error en el servidor, intente de nuevo más tarde');\n      }\n    });\n    (await this.bpmService.getIncidentes()).subscribe((resp: any) =>{\n      if(resp.status){\n        this.incidentes = resp.data;\n      }else{\n        this.alertService.presentAlert('Ha ocurrido un error en el servidor, intente de nuevo más tarde');\n      }\n    });\n    (await this.bpmService.getPrioridades()).subscribe((resp: any) =>{\n      if(resp.status){\n        this.prioridades = resp.data;\n      }else{\n        this.alertService.presentAlert('Ha ocurrido un error en el servidor, intente de nuevo más tarde');\n      }\n    });\n    (await this.bpmService.getSectores()).subscribe((resp: any) =>{\n      if(resp.status){\n        this.sectores = resp.data;\n      }else{\n        this.alertService.presentAlert('Ha ocurrido un error en el servidor, intente de nuevo más tarde');\n      }\n    });\n    (await this.bpmService.getAreas(this.sede)).subscribe((resp: any) =>{\n      console.log(resp);\n      if(resp.status){\n        this.areas = resp.data;\n      }else{\n        this.alertService.presentAlert('Ha ocurrido un error en el servidor, intente de nuevo más tarde');\n      }\n    });\n  }\n\n  back(){\n    this.navCtrl.back({animated: true});\n  }\n\n  selectCategoria(ev){\n    this.categoria = ev.detail.value;\n  }\n\n  selectArea(ev){\n    this.area = ev.detail.value;\n  }\n\n  selectIncidente(ev){\n    this.incidente = ev.detail.value;\n  }\n\n  selectSede(ev){\n    this.sede = ev.detail.value;\n  }\n\n  selectSector(ev){\n    this.sector = ev.detail.value;\n  }\n\n  selectPrioridad(ev){\n    this.prioridad = ev.detail.value;\n  }\n\n  async presentLoading() {\n    const loading = await this.loadingController.create({\n      message: 'Cargando...'\n    });\n    await loading.present();\n  }\n\n  async guardarTicket(){\n    this.presentLoading();\n    (await this.bpmService.guardarTicket(this.descripcion, this.incidente, this.prioridad, this.sede, this.sector, this.area))\n    .subscribe(async (resp: any) =>{\n      console.log(resp);\n      if(resp.status){\n        this.ticketCodigo = await  resp.data.ticket_codigo;\n        await this.post();\n        await this.alertService.presentToast('El ticket ha sigo generado con éxito.', 'success', 2500);\n        this.loadingController.dismiss();\n        this.navCtrl.back();\n      }else{\n        this.alertService.presentAlert(resp.message);\n      }\n    });\n  }\n\n  onFileSelected(ev){\n    console.log(ev);\n    this.selectedFile = ev.target.files[0];\n  }\n\n  async post(){\n    (await this.bpmService.post(this.ticketCodigo, 1, this.selectedFile, this.descripcion)).subscribe((resp: any) =>{\n      console.log(resp);\n    });\n  }\n\n\n}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button (click)=\\\"back()\\\" color=\\\"light\\\">Atrás\\n        <ion-icon slot=\\\"start\\\" name=\\\"arrow-back-outline\\\" color=\\\"light\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>Nuevo Ticket</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <br>\\n  <ion-list>\\n    <ion-item>\\n      <ion-label>Categoría</ion-label>\\n      <ion-select (ionChange)=\\\"selectCategoria($event)\\\">\\n        <ion-select-option *ngFor=\\\"let categoria of categorias\\\" value=\\\"{{categoria.codigo}}\\\">{{categoria.nombre}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>Área</ion-label>\\n      <ion-select (ionChange)=\\\"selectArea($event)\\\">\\n        <ion-select-option *ngFor=\\\"let area of areas\\\" value=\\\"{{area.codigo}}\\\">{{area.nombre}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>Incidente</ion-label>\\n      <ion-select (ionChange)=\\\"selectIncidente($event)\\\">\\n        <ion-select-option *ngFor=\\\"let incidente of incidentes\\\" value=\\\"{{incidente.codigo}}\\\">{{incidente.nombre}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>Sede</ion-label>\\n      <ion-select (ionChange)=\\\"selectSede($event)\\\">\\n        <ion-select-option *ngFor=\\\"let sede of sedes\\\" value=\\\"{{sede.codigo}}\\\">{{sede.nombre}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>Sector</ion-label>\\n      <ion-select (ionChange)=\\\"selectSector($event)\\\">\\n        <ion-select-option *ngFor=\\\"let sector of sectores\\\" value=\\\"{{sector.codigo}}\\\">{{sector.nombre}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>Prioridad</ion-label>\\n      <ion-select (ionChange)=\\\"selectPrioridad($event)\\\">\\n        <ion-select-option *ngFor=\\\"let prioridad of prioridades\\\" value=\\\"{{prioridad.codigo}}\\\">{{prioridad.nombre}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>Descripción :</ion-label>\\n      <ion-textarea rows=\\\"4\\\" placeholder=\\\"Descripción...\\\" [(ngModel)]=\\\"descripcion\\\">  </ion-textarea>\\n    </ion-item>\\n  </ion-list>\\n\\n  <ion-row>\\n    <ion-col size=\\\"2.7\\\"></ion-col>\\n    <ion-col size=\\\"6.6\\\">\\n      <div class=\\\"file-input\\\">\\n        <input type=\\\"file\\\" id=\\\"file\\\" class=\\\"file\\\" (change)=\\\"onFileSelected($event)\\\">\\n        <label for=\\\"file\\\">\\n          Seleccionar archivo\\n          <p class=\\\"file-name\\\"></p>\\n        </label>\\n      </div>\\n    </ion-col>\\n    <ion-col size=\\\"2.7\\\"></ion-col>\\n  </ion-row>\\n  \\n  <br>\\n  <ion-row>\\n    <ion-col size=\\\"3\\\"></ion-col>\\n    <ion-col size=\\\"6\\\">\\n      <ion-button expand=\\\"block\\\" class=\\\"button-save\\\" strong=\\\"true\\\" (click)=\\\"guardarTicket()\\\">Grabar\\n                <ion-icon slot=\\\"start\\\" color=\\\"white\\\" name=\\\"save\\\"></ion-icon>\\n      </ion-button>\\n    </ion-col>\\n    <ion-col size=\\\"3\\\"></ion-col>\\n  </ion-row>\\n</ion-content>\\n\";"],"names":[],"sourceRoot":"webpack:///"}